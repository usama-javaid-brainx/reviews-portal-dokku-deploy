<h2>Photos</h2>
<div class="tabs_content_wrap" data-controller="photos">

  <div class="uploaded-files">

    <div class="mb-3 main-thumbnail">
      <img id="mainThumbnail" data-photos-target="mainThumbnail" src="https://cdn.filestackcontent.com/5gHkNOKTru4JPI3Ey1VP">
    </div>

    <div class="d-flex" id="js-thumbnails" >
      <img src="https://cdn.filestackcontent.com/5gHkNOKTru4JPI3Ey1VP" class="thumbnail" onclick="updateImage(this)">
      <img src="https://cdn.filestackcontent.com/vcyhtMigQuG1HpC74uit" class="thumbnail" onclick="updateImage(this)">
      <img src="https://cdn.filestackcontent.com/REdChJLsSIKvAeg7yKuK" class="thumbnail" onclick="updateImage(this)">
      <img src="https://cdn.filestackcontent.com/Ota9nmcKRYykFU4DPR67" class="thumbnail" onclick="updateImage(this)">

      <%= f.filestack_field :images, '+', class:'thumbnail upload-button px-0', id: 'unique-iddd', input_id: 'unique-input-idsd', pickerOptions: { onFileUploadFinished: 'callbackOnFileUploadFinished' } %>

    </div>
  </div>

  <div class="file_upload_place">
    <div class="content">
      <div class="upload_link">
        <%= f.filestack_field :images, 'Upload files', id: 'unique-iddd', input_id: 'unique-input-idsd', pickerOptions: { onFileUploadFinished: 'callbackOnFileUploadFinished' } %>
        <span> or drag and drop</span>
        <div>PNG, JGP (max 10MB)</div>
      </div>
    </div>
  </div>
</div>

<script>
  function callbackOnFileSelected(){
    console.log("file selected")
  }

  function callbackOnFileUploadFinished(data) {
    const image = document.createElement('img');
    image.classList.add('thumbnail', 'px-0')
    image.setAttribute(
      'data-action',
      'click->photos#updatePhoto'
    )
    image.setAttribute(
      'src',
      data.url
    );
    image.addEventListener("click", () => {
      updateImage(image)
    })
    document.getElementById('js-thumbnails').prepend(image)
    updateImage(image)
  }

  function updateImage(that) {
    document.getElementById('mainThumbnail').src = that.src
  }
</script>